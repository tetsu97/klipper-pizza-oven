/* ===== Base / reset ===== */
* { box-sizing: border-box; font-family: 'Inter','Segoe UI',Tahoma,Geneva,Verdana,sans-serif; }

:root{
  --gap: clamp(10px, 2.5vw, 16px);
  --pad: clamp(12px, 3vw, 24px);
  --panel-bg: #2a2a40;
  --page-bg: #0f111a;
  --muted: #ccc;
  --brand: #f44336;
}

html, body {
  min-height: 100%;
  margin: 0;
  background: var(--page-bg);
  color: #eaeaea;
  font-size: clamp(14px, 1.5vw + 0.5rem, 18px);
}

/* ===== Layout ===== */
.layout { display: flex; min-height: 100dvh; }
.main   { flex: 1; padding: 2rem; overflow-y: auto; }

/* ===== Sidebar + toggle ===== */
.sidebar{
  background: #1c1e2a; width: 220px; padding: 1rem;
  display: flex; flex-direction: column; justify-content: space-between;
  border-radius: 12px;
}
.sidebar h1{ font-size: 1.2rem; margin-bottom: 1rem; }
.sidebar ul{ list-style: none; padding: 0; margin: 0; }
.sidebar li{ margin: .5rem 0; }
.sidebar a{
  color: #ccc; text-decoration: none; display:block;
  padding:.5rem; border-radius:8px;
}
.sidebar a.active{ background: var(--brand); color:#fff; font-weight:700; }
.sidebar a:hover { background:#3a3a5a; }
#versionInfo{ color:#777; font-size:.85rem; user-select:none; text-align:center; padding-top:1rem; border-top:1px solid #333; margin-top:auto; }

.sidebar-toggle{ font-size:1.5rem; background:none; border:0; cursor:pointer; margin:.5rem; display:none; }

@media (max-width: 980px){
  .sidebar-toggle{ display:inline-block; }
  .sidebar{
    position:absolute; inset:0 auto 0 0; height:100dvh; z-index:1000;
    transform: translateX(-100%); transition: transform .3s ease;
  }
  .sidebar.open{ transform: translateX(0); }
  .main{ padding: var(--pad); }
}

/* ===== Panels / common ===== */
.panel{
  background: var(--panel-bg); padding: 2rem; border-radius: 12px;
  box-shadow: 0 2px 10px rgba(0,0,0,.6);
  display: none; overflow-x: auto;
}
.panel.active{ display:block; }
.panel h2{ margin-top:0; }

/* ===== Oven status mini bar ===== */
.ovenStatusPanel{ background:#171a2e; border:1px solid #262a45; border-radius:12px; padding:8px 10px; margin-bottom:12px; }
.ovenStatusPanel .os-row{ display:flex; gap:14px; flex-wrap:wrap; align-items:center; }
.ovenStatusPanel .os-pill{ padding:4px 10px; border-radius:999px; background:#293159; color:#dbe2ff; }
.ovenStatusPanel .os-progress{ height:6px; background:#252c52; border-radius:999px; overflow:hidden; margin-top:8px; }
.ovenStatusPanel .os-progress .bar{ height:100%; background:#5b86ff; width:0%; transition:width .2s; }
.ovenStatusPanel .js-status-text{ display:none !important; } /* jen pilulka */

/* ===== Utilities ===== */
.os-row{ display:flex; align-items:center; }
.centered-row{ text-align:center; margin:10px 0 16px; }
.actions-right{ text-align:right; margin-top:10px; }
.row{ display:flex; }
.align{ align-items:center; }
.space-between{ justify-content:space-between; }
.gap{ gap:1rem; }
.gap-small{ gap:.5rem; }
.w-400{ max-width:400px; width:100%; }

/* ===== Forms / inputs ===== */
label{ display:block; margin:1rem 0 .3rem; font-weight:700; }
input, textarea, select.macro-select{
  width:100%; padding:.5rem; border-radius:6px; border:1px solid #333;
  background:#1e1e2f; color:#e0e0e0;
}
textarea{ height:250px; margin-top:1rem; }
select.macro-select{ font-size:.9rem; min-width:160px; cursor:pointer; transition:border-color .3s, background-color .3s; }
select.macro-select:hover, select.macro-select:focus{ border-color: var(--brand); background:#2a2a40; outline:none; color:#fff; }

/* =================================== */
/* ===== TLAČÍTKA (Nový globální styl) ===== */
/* =================================== */

button,
.btn { /* Přidáme i třídu .btn pro případ, že bychom chtěli ostylovat odkaz jako tlačítko */
  /* Základní vzhled */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 10px 16px; border-radius:6px; cursor:pointer;
  border: 1px solid transparent;
  border-radius: 6px;
  font-size: 0.95rem;
  font-weight: 600;
  line-height: 1.4;
  text-align: center;
  
  /* Chování */
  cursor: pointer;
  user-select: none;
  transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
  
  /* Výchozí barvy (neutrální/sekundární tlačítko) */
  background-color: #293159;
  border-color: #3b457a;
  color: #dbe2ff;

  /* Responzivita pro dotyk */
  min-height: 44px;

  /* DŮLEŽITÉ: Odstranili jsme margin, ten by měl řešit layout, ne tlačítko samotné */
  margin: 0;
}

button:hover,
.btn:hover {
  background-color: #34407a;
  border-color: #4a59a3;
}

button:focus,
.btn:focus {
  outline: 2px solid #5b86ff;
  outline-offset: 2px;
}

/* -- Varianty tlačítek -- */

/* Primární tlačítko (výrazné) */
button.btn--primary,
.btn.btn--primary {
  background-color: #5b86ff; /* Modrá */
  border-color: #5b86ff;
  color: #fff;
}
button.btn--primary:hover,
.btn.btn--primary:hover {
  background-color: #739dff;
  border-color: #739dff;
}

/* Nebezpečné tlačítko (červené) - tvůj původní styl */
button.btn--danger,
.btn.btn--danger {
  background-color: #d32f2f; /* Červená */
  border-color: #d32f2f;
  color: #fff;
}
button.btn--danger:hover,
.btn.btn--danger:hover {
  background-color: #b71c1c;
  border-color: #b71c1c;
}

/* ===== Tables ===== */


table{ width:100%; border-collapse:separate; border-spacing:0; margin-top:1rem; background:#1e2135; border-radius:12px; padding:8px; }
thead tr th{ background:transparent; padding:6px 8px; text-align:center; color:#ccc; user-select:none; font-weight:700; }
tbody tr td{ background:transparent; border:0; padding:6px 8px; vertical-align:middle; }
.name-cell{ display: flex; align-items: center; gap: 10px; }
.name-cell .gthumb{ width: 48px; height: 48px; border-radius: 8px; background: #0e1022; border: 1px solid #2a2f55; object-fit: cover; flex-shrink: 0; transition: opacity .15s ease; opacity: 1; }

.fname {
  /* Povolí zalamování na mezerách i uvnitř dlouhých slov */
  white-space: normal;
  word-break: break-all;
  
  /* Zruší případné ořezávání textu */
  overflow: visible;
  text-overflow: clip;
  
  /* Další vlastnosti pro správné zobrazení */
  max-width: 100%; /* Zajistí, že se prvek neroztáhne mimo buňku */
  display: inline-block;
  vertical-align: middle;
}

/* Action buňky – sjednocené (Machine, Profiles, Dashboard files) */
#machineTable td:last-child,
#profilesTable td:last-child,
#dashFileList td:last-child{
  display:flex; align-items:center; justify-content:center;
  gap:.5rem; white-space:nowrap;
}
#machineTable td:last-child button,
#profilesTable td:last-child button,
#dashFileList td:last-child button{
  margin-top:0; margin-right:0;
}

/* ===== Charts / canvases ===== */
canvas{ width:100% !important; height:auto !important; max-height:400px; }
#chart, #editPointsChart{ width:100%; aspect-ratio:16/9; height:auto; max-height:min(50vh, 360px); }
#chart-container{ position:relative; width:100%; height:auto; }

/* ===== Two-column shared (generator, editor) ===== */
.two-col{ display:grid !important; grid-template-columns:1fr 1fr; gap:var(--gap); }
@media (max-width:900px){ .two-col{ grid-template-columns:1fr; } }
#gcodeOutput{ width:100%; height:clamp(220px, 40vh, 300px); }

/* ===== Machine layout (Grid, zarovnané okraje) ===== */
.machine-grid{
  display:grid !important;
  grid-template-columns: 1fr minmax(360px, 32%);
  gap:16px; align-items:start;
}
.machine-col.left, .machine-col.right{ max-width:100%; }
@media (max-width:1024px){ .machine-grid{ grid-template-columns:1fr; } }

/* System Loads */
.sysloads{ background:transparent; padding:0; }
.sysloads-row{ display:flex; flex-direction:column; gap:10px; }
.sysloads-col{ flex:1; }
.syslabel{ font-size:.85rem; opacity:.7; margin-bottom:4px; }
.membar{ background:#333; border-radius:4px; height:10px; overflow:hidden; }
.membar-fill{ background:#5bd08c; height:100%; }
.sysmem-text{ font-size:.8rem; opacity:.8; margin-top:4px; }

/* Console */
.console-log{
  height: clamp(220px, 40vh, 360px);
  overflow:auto; background:#1e2135; border-radius:8px; padding:10px;
  font-family: ui-monospace,Consolas,monospace;
}

/* Console input + Send – robustní grid */
#consolePanel .console-input{
  display:grid; grid-template-columns:1fr auto; align-items:center; gap:8px;
}
#consoleInput{ height:36px !important; }
#consoleSendBtn{
  height:36px !important; margin-top:0 !important; line-height:1; padding:.4rem .7rem;
}

/* Dashboard mini console – sjednocení výšky */
.dash-console-input{ display:flex; gap:8px; align-items:center; }
.dash-console-input input, .dash-console-input button{ height:36px; }
.dash-console-input button{ margin-top:0; }

/* ===== MODALS (sjednocená verze) ===== */
.modal{
  position: fixed; inset: 0; display:none; align-items:center; justify-content:center;
  background: rgba(0,0,0,.55); z-index:2000;
}
.modal .modal-content{
  background:#1e2135; border:1px solid #262a45; border-radius:12px;
  width:min(95vw, 1100px); max-height:90vh; padding:16px 18px; overflow:auto;
  box-shadow: 0 20px 60px rgba(0,0,0,.6);
}
.modal.hidden{ display:none !important; }

/* BEM modal (create file) – necháváme kvůli existujícím šablonám */
.modal__backdrop{ position:absolute; inset:0; background: rgba(0,0,0,.5); }
.modal__dialog{
  position: relative; margin: 5vh auto; max-width: 980px; width: 96%;
  background:#1e2135; border-radius:12px; padding:16px;
  box-shadow: 0 10px 30px rgba(0,0,0,.4); max-height: 85dvh; overflow:auto;
}
.modal__header{ display:flex; align-items:center; justify-content:space-between; margin-bottom:12px; }
.modal__close{ font-size:20px; line-height:1; background:transparent; border:0; cursor:pointer; color:#fff; }
.modal__body{ max-height:75dvh; overflow:auto; }

/* Grid uvnitř modalů */
.modal .two-col{ display:grid !important; grid-template-columns:1fr 1fr; gap:var(--gap); }
@media (max-width:1000px){ .modal .two-col{ grid-template-columns:1fr; } }

/* Pojistky proti přetekání */
.chart-wrap{ height:280px; max-width:100%; }
#chart, #editPointsChart{ width:100% !important; height:auto !important; }
#gcodeOutput{ width:100%; box-sizing:border-box; }

/* CodeMirror – sjednoceno */
#editFileModal .CodeMirror,
#createFileModal .CodeMirror{
  background:#0f1124; color:#e6e9ff; border:1px solid #242a4f; border-radius:10px;
  height:60vh; font-size:14px; line-height:1.45;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", "Roboto Mono", monospace;
}
#editFileModal .CodeMirror-gutters, #createFileModal .CodeMirror-gutters{ background:#14183a; border-right:1px solid #242a4f; }
#editFileModal .CodeMirror-linenumber, #createFileModal .CodeMirror-linenumber{ color:#6a7390; }
.cm-s-material-darker.CodeMirror{ background:#0f1124; color:#e6e9ff; }
.cm-s-material-darker .CodeMirror-cursor{ border-left:2px solid #f44336; }
.cm-s-material-darker .CodeMirror-selected{ background:rgba(91,134,255,.25) !important; }

/* Machine toolbar helper */
.machine-toolbar{ display:flex; align-items:center; gap:.75rem; }

/* ===== Sidebar brand (3 styly) ===== */
.sidebar h1.brand{
  margin:0 0 1rem; line-height:1.05; width:fit-content;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
.brand-main{ display:block; font-weight:900; font-size:26px; letter-spacing:0 }
.brand-sub { display:block; font-weight:700; font-size:14px; letter-spacing:.12em; text-transform:uppercase; color:#cfd3e0 }

/* --- 1) STACK + ACCENT (doporučeno) --- */
.brand--stack .brand-main::after{
  content:""; display:block; height:3px; border-radius:2px; margin-top:4px;
  background: linear-gradient(90deg, #5b86ff, #f44336);
}
.brand--stack .brand-sub{ text-align:right; margin-top:6px; }

/* --- 2) PILL (hlavička v pilulce) --- */
.brand--pill .brand-main{
  background:#f44336; color:#fff; padding:2px 10px; border-radius:8px;
}
.brand--pill .brand-sub{ margin-top:6px; color:#d7daea; }

/* --- 3) BAR LEFT (svislý proužek vlevo) --- */
.brand--bar{
  position:relative; padding-left:10px;
}
.brand--bar::before{
  content:""; position:absolute; left:0; top:0; bottom:0; width:4px;
  background:linear-gradient(180deg,#5b86ff,#f44336); border-radius:3px;
}
.brand--bar .brand-sub{ margin-top:4px; color:#d7daea; }

/* drobné přizpůsobení na mobilech */
@media (max-width:980px){
  .brand-main{ font-size:24px }
  .brand-sub { font-size:13px }
}

/* Sidebar brand: centrovat celý blok */
.sidebar h1.brand{
  margin: 0 auto 1rem;     /* auto okraje → střed */
  text-align: center;      /* zarovnat text uvnitř */
  width: fit-content;      /* zůstává kompaktní */
}

/* U stack varianty centrovat i druhý řádek + linku pod ním */
.brand--stack .brand-sub{ text-align: center; }
.brand--stack .brand-main::after{
  margin: 4px auto 0;      /* linka uprostřed */
  /* volitelné: zúžit linku, ať vypadá jemněji */
  /* width: 80%; */
}

/* === Temperature: stop overlap once and for all === */
#dashTempsCard .dash-temps-layout{
  display: grid;
  grid-template-columns: minmax(220px, 280px) 1fr; /* tabulka vlevo, graf vpravo */
  gap: 12px;
  align-items: start;
}
@media (max-width: 900px){
  #dashTempsCard .dash-temps-layout{ grid-template-columns: 1fr; }
}

/* ← důležité: aby se děti gridu nesnažily tlačit širší než kolona */
#dashTempsCard .dash-temps-layout > *{ min-width: 0; }

/* tabulka = stabilní šířky + případné zalomení */
#dashTempsCard .temps{
  width: 100%;
  table-layout: fixed;
}
#dashTempsCard .temps th,
#dashTempsCard .temps td{
  padding: 6px;
  border-bottom: 1px solid #242a4f;
  word-break: break-word;
}

/* graf: canvas je přesně vysoký jako kontejner, nic nepřeteče */
#dashTempsCard .chart-wrap{
  height: clamp(240px, 34vh, 320px);
  background:#10132a; border:1px solid #242a4f; border-radius:10px; padding:6px;
  position: relative;
  overflow: hidden;                 /* usekni vše mimo box */
  contain: layout paint;            /* vlastní „mini-layout“ → stabilnější */
}
#dashTempChart{
  display:block;
  width:100% !important;
  height:100% !important;           /* přepíše globální canvas height:auto */
}

/* Profiles – název se thumbnailem */
#profilesTable .name-cell{
  display: flex;
  align-items: center;
  gap: 10px;
}
#profilesTable .name-cell .gthumb{
  width: 48px;
  height: 48px;
  border-radius: 8px;
  background: #0e1022;
  border: 1px solid #2a2f55;
  object-fit: cover;        /* square crop */
  flex: 0 0 auto;
  transition: opacity .15s ease;
  opacity: .0;              /* zobrazí se po načtení */
}
/* ===== Table action buttons: vertical + horizontal align ===== */

/* Akční sloupec – flex zarovnání doprostřed */
#profilesTable td.btns,
#machineTable  td.btns {
  display: flex;
  align-items: center;   /* vertikální zarovnání */
  justify-content: center;
  gap: 8px;
  white-space: nowrap;   /* tlačítka zůstanou na řádku */
}

/* Vypnout globální margin-top u tlačítek v tabulkách */
#profilesTable td.btns button,
#machineTable  td.btns button {
  margin-top: 0;
}

/* Sjednocená výška / padding / zarovnání obsahu */
#profilesTable td.btns button,
#machineTable  td.btns button {
  height: 32px;
  line-height: 32px;     /* fallback pro ne-flex render */
  padding: 0 10px;
  display: inline-flex;  /* spolehlivé centrování textu */
  align-items: center;
  justify-content: center;
}

/* Pro jistotu srovnat vertikální zarovnání buněk v řádku */
#profilesTable tbody tr td,
#machineTable  tbody tr td {
  vertical-align: middle;
}

/* (Volitelné) Zmenšení mezer, když je v řádku málo místa */
@media (max-width: 700px) {
  #profilesTable td.btns,
  #machineTable  td.btns { gap: 6px; }
}
/* Profiles: zarovnání akčních tlačítek ve sloupci */
#profilesTable td.btns{
  display: table-cell !important;   /* zruší dřívější flex */
  vertical-align: middle;           /* centrovat obsah v rámci řádku */
  padding-top: 6px;                 /* stejné jako ostatní buňky */
  padding-bottom: 6px;
}

/* Wrapper uvnitř buňky – horizontální řazení + centrování */
#profilesTable td.btns .btns-wrap{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

/* Jednotná výška / zrušit globální margin-top v tabulce */
#profilesTable td.btns .btns-wrap button{
  margin-top: 0;
  height: 32px;
  line-height: 32px;
  padding: 0 10px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* Pro jistotu centrovat celý řádek vertikálně */
#profilesTable tbody tr td{ vertical-align: middle; }

/* (Volitelné) sjednocená minimální výška řádku, aby ladila s 48px thumbnail */
#profilesTable tbody tr{ min-height: 60px; }  /* 48px thumb + padding */

/* ===== Unified status bar layout (left/center/right) ===== */
.ovenStatusPanel .os-bar{
  display: grid;
  grid-template-columns: 1fr auto 1fr;  /* left | center | right */
  align-items: center;
  gap: 12px;
}

/* podsložky */
.ovenStatusPanel .os-left{
  display:flex; align-items:center; gap:10px; justify-self:start;
}
.ovenStatusPanel .os-center{
  display:flex; align-items:center; gap:8px; justify-self:center; text-align:center;
}
.ovenStatusPanel .os-right{
  display:flex; align-items:center; gap:8px; justify-self:end;
}

/* tlačítka vpravo: stejné jako jinde, bez margin-top */
.ovenStatusPanel .os-right button{
  margin-top: 0;
  height: 32px;
  line-height: 32px;
  padding: 0 10px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* progress bar přes celou šířku, dole */
.ovenStatusPanel .os-progress{
  height:6px; background:#252c52; border-radius:999px; overflow:hidden; margin-top:8px;
}
.ovenStatusPanel .os-progress .bar{
  height:100%; background:#5b86ff; width:0%; transition:width .2s;
}

/* responsivní stack */
@media (max-width: 900px){
  .ovenStatusPanel .os-bar{
    grid-template-columns: 1fr;      /* nad sebe */
    gap: 8px;
  }
  .ovenStatusPanel .os-left,
  .ovenStatusPanel .os-center,
  .ovenStatusPanel .os-right{
    justify-self: start;              /* zarovnat vlevo na úzkých displejích */
  }
}
/* === Unified Firmware Restart / Emergency Stop buttons (global) === */
#btnFwRestart, #osFwRestart,
#btnEStop,    #osEStop {
  margin-top: 0;                 /* přebije globální margin-top */
  height: 32px;
  line-height: 32px;
  padding: 0 12px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  font-weight: 600;
}

/* Firmware restart: modrý "pill" s jemným okrajem */
#btnFwRestart, #osFwRestart {
  background: #293159;
  border: 1px solid #3b457a;
  color: #dbe2ff;
}
#btnFwRestart:hover, #osFwRestart:hover { background: #34407a; }

/* Emergency stop: výrazně červené */
#btnEStop, #osEStop {
  background: #d32f2f;
  border: 0;
  color: #fff;
}
#btnEStop:hover, #osEStop:hover { background: #b71c1c; }

/* Přátelský focus */
#btnFwRestart:focus, #osFwRestart:focus,
#btnEStop:focus,    #osEStop:focus {
  outline: 2px solid #5b86ff;
  outline-offset: 2px;
}

/* Konzistentní mezera vpravo ve status baru */
.ovenStatusPanel .os-right { gap: 8px; }

/* -- Nové styly pro kontextové menu a tabulky -- */

/* Zvýraznění řádku po najetí myší */
.clickable-row {
  cursor: pointer;
  transition: background-color 0.15s ease;
}
.clickable-row:hover {
  background-color: rgba(91, 134, 255, 0.15);
}

/* Kontextové menu */
.context-menu {
  display: none; /* Standardně skryté */
  position: absolute; /* Pozicujeme ho vůči stránce */
  z-index: 1000;
  width: 160px;
  background-color: #2a2a40;
  border: 1px solid #4a4a6a;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  padding: 6px;
  list-style: none;
  margin: 0;
}

.context-menu button {
  display: block;
  width: 100%;
  background: none;
  border: none;
  text-align: left;
  padding: 8px 12px;
  color: #eaeaea;
  border-radius: 4px;
  margin: 0; /* Vynulujeme globální margin */
}

.context-menu button:hover {
  background-color: #5b86ff;
  color: #fff;
}

/* =================================== */
/* ===== RESPONZIVNÍ ÚPRAVY PRO MOBIL ===== */
/* =================================== */

@media (max-width: 980px){
  .sidebar-toggle{ display:inline-block; }
  .sidebar{ position:fixed; inset:0 auto 0 0; height:100dvh; z-index:1000; transform: translateX(-100%); transition: transform .3s ease; }
  .sidebar.open{ transform: translateX(0); }
  .main, .panel{ padding: var(--pad); }
  .two-col, .machine-grid { grid-template-columns: 1fr; }

}

@media (max-width: 768px) {
  /* --- Responzivní tabulky --- */
  .responsive-table thead { display: none; }
  .responsive-table tr { display: block; margin-bottom: 1.25rem; border-radius: 8px; border: 1px solid #262a45; background: #171a2e; padding: 0.5rem; }
  .responsive-table td { display: flex; justify-content: space-between; align-items: center; text-align: right; padding: 0.75rem 0.5rem; border-bottom: 1px solid #2a2a40; }
  .responsive-table tr td:last-of-type { border-bottom: none; }
  .responsive-table td::before { content: attr(data-label); font-weight: bold; text-align: left; color: #aeb8d3; margin-right: 1rem; }
  .responsive-table .name-cell { display: block; text-align: left; }
  .responsive-table .name-cell::before { display: none; }

  .fname {
    /* Rušíme pravidla, která bránila zalamování */
    white-space: normal; /* Povolí zalamování na mezerách */
    overflow: visible;
    text-overflow: clip;
    max-width: none; /* Povolíme plnou šířku buňky */
    
    /* A přidáme zalamování slov, pokud je to nutné */
    word-break: break-all;
    
    /* Zachováme původní vlastnosti */
    display: inline-block;
    vertical-align: middle;
  }

.responsive-table .name-cell .gthumb {
  display: none;
}

  /* Zvětšíme důležitá tlačítka pro snadnější dotyk */
  .modal-content button, #profilesRefreshBtn, #openGeneratorBtn, .dash-actions button, #updRefreshBtn, #updAllBtn, #openCreateFileBtn {
    min-height: 44px; padding: 10px 16px; font-size: 1rem;
  }
    /* --- Responzivní modální okna (Profiles) --- */

  /* Zajistíme, aby obsah modálu lépe využil prostor na mobilu */
  .modal .modal-content {
    padding: 1rem;
    /* Na mobilu zabere skoro celou šířku, na tabletu bude mít max 500px */
    width: min(95vw, 500px); 
  }

  /* Dvousloupcový layout se spolehlivě změní na jednosloupcový */
  .modal .two-col {
    grid-template-columns: 1fr;
  }

  /* Upravíme výšku grafu a textové oblasti pro vertikální layout */
  .modal .chart-wrap {
    height: 250px; /* Menší, ale stále čitelná výška */
    margin-bottom: 1rem;
  }

  .modal #gcodeOutput {
    height: 200px; /* Menší výška pro G-kód */
  }

  /* Tlačítka v generátoru (Annealing/Drying) dáme pod sebe */
  #generatorModal .row.gap-small {
    flex-direction: column;
  }

  /* Tlačítka akcí na konci modálu */
  .modal .actions-right {
    display: flex;
    flex-direction: column; /* Tlačítka pod sebou pro snadnější klepnutí */
    gap: 0.75rem;
    margin-top: 1.5rem;
  }

  .modal .actions-right button {
    width: 100%; /* Tlačítka na plnou šířku */
    margin-right: 0; /* Zrušíme případné pravé odsazení */
  }
}

/* =================================== */
/* ===== TOAST NOTIFIKACE ===== */
/* =================================== */

#toast-container {
  position: fixed;
  top: 1rem;
  left: 50%;
  transform: translateX(-50%);
  z-index: 9999;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  width: min(90vw, 350px);
}

.toast {
  padding: 1rem;
  border-radius: 8px;
  color: #fff;
  font-weight: 600;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  border: 1px solid rgba(255, 255, 255, 0.1);
  opacity: 0;
  transform: translateY(-50px); /* Animace shora dolů */
  transition: opacity 0.3s ease, transform 0.3s ease;
}

.toast.show {
  opacity: 1;
  transform: translateY(0);
}

/* Barevné varianty (zůstávají stejné) */
.toast--success {
  background-color: #1f3a2e;
  border-left: 5px solid #5bd08c;
}
.toast--error {
  background-color: #3a2a2a;
  border-left: 5px solid #f57c7c;
}
.toast--info {
  background-color: #2a3a4a;
  border-left: 5px solid #5b86ff;
}

/* ===== Loading Overlay ===== */
#loadingOverlay {
  position: fixed;
  z-index: 9999;
  top: 0;
  left: 0;
  width: 100%;
  height: 100vh; /* 'vh' je spolehlivější na mobilech */
  background: rgba(0, 0, 0, 0.75);
  backdrop-filter: blur(5px);
  
  /* display je nyní řízeno z JS, ale flex pro centrování zůstává */
  display: flex; 
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: #fff;
  font-size: 1.2rem;
}

#loadingOverlay .spinner {
  width: 50px;
  height: 50px;
  border: 5px solid #444;
  border-top-color: #fff;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 1rem;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* ================================================== */
/* ===== RESPONZIVNÍ MODÁLNÍ OKNO (PROFILES) ===== */
/* ================================================== */

/* --- Styly pro formulář se segmenty (náhrada za tabulku) --- */
.segments-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-bottom: 1rem;
}
.segment-row {
  display: flex;
  align-items: flex-end;
  gap: 0.75rem;
}
.segment-input-group {
  flex: 1;
  min-width: 60px;
}
.segment-input-group label {
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--muted);
  display: block;
  margin: 0 0 0.3rem 0;
}
.segment-input-group input {
  width: 100%;
}
.segment-action-group {
  flex-shrink: 0;
}

/* --- Media Query pro mobilní zařízení --- */
@media (max-width: 980px) {

  /* 1. Základní nastavení modálu pro mobily */
  .modal .modal-content {
    /* Modál zabere téměř celou šířku, ale max 500px na tabletech */
    width: min(95vw, 500px);
    padding: var(--pad);
  }

  /* 2. Dvousloupcový layout se změní na jednosloupcový (již možná máte) */
  .modal .two-col {
    grid-template-columns: 1fr;
  }

  /* 3. Úprava výšek grafu a textového pole */
  .modal .chart-wrap {
    height: 250px; /* Menší, ale stále čitelná výška */
    margin-bottom: 1rem;
  }
  .modal #gcodeOutput {
    height: 200px;
  }

  /* 4. Tlačítka "Uložit/Zrušit" dáme pod sebe pro snazší ovládání */
  .modal .actions-right {
    display: flex;
    flex-direction: column; /* Tlačítka pod sebou */
    gap: 0.75rem;
    margin-top: 1.5rem;
  }
  .modal .actions-right .btn {
    width: 100%; /* Tlačítka na plnou šířku */
  }

  /* 5. Řádek se segmenty se na velmi úzkých obrazovkách "zalomí" */
  .segment-row {
    flex-wrap: wrap;
  }
}